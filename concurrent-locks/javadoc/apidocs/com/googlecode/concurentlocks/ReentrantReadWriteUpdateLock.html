<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_04-ea) on Tue Aug 06 21:05:33 BST 2013 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>ReentrantReadWriteUpdateLock (concurrent-locks 1.0.0-SNAPSHOT API)</title>
<meta name="date" content="2013-08-06">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ReentrantReadWriteUpdateLock (concurrent-locks 1.0.0-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/googlecode/concurentlocks/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ReentrantReadWriteUpdateLock.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/googlecode/concurentlocks/ReadWriteUpdateLock.html" title="interface in com.googlecode.concurentlocks"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/googlecode/concurentlocks/ReentrantReadWriteUpdateLock.html" target="_top">Frames</a></li>
<li><a href="ReentrantReadWriteUpdateLock.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.googlecode.concurentlocks</div>
<h2 title="Class ReentrantReadWriteUpdateLock" class="title">Class ReentrantReadWriteUpdateLock</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.googlecode.concurentlocks.ReentrantReadWriteUpdateLock</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/googlecode/concurentlocks/ReadWriteUpdateLock.html" title="interface in com.googlecode.concurentlocks">ReadWriteUpdateLock</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReadWriteLock.html?is-external=true" title="class or interface in java.util.concurrent.locks">ReadWriteLock</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">ReentrantReadWriteUpdateLock</span>
extends <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../com/googlecode/concurentlocks/ReadWriteUpdateLock.html" title="interface in com.googlecode.concurentlocks">ReadWriteUpdateLock</a></pre>
<div class="block">An implementation of <a href="../../../com/googlecode/concurentlocks/ReadWriteUpdateLock.html" title="interface in com.googlecode.concurentlocks"><code>ReadWriteUpdateLock</code></a>, extending the functionality of the JDK
 <a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>ReentrantReadWriteLock</code></a> with an <b>update lock</b> in addition to the read and write lock, supporting upgrade
 from read-only operation to writing status, and downgrade again.

 <h1>Background - JDK ReentrantReadWriteLock</h1>
 The <tt>ReentrantReadWriteLock</tt> in the JDK classifies threads as needing to <i>read-without-write</i>,
 <i>write-without-read</i>, or <i>write-before-read</i>. Threads can obtain the read lock, or the write lock, and if
 they have the write lock, they can downgrade it to a read lock. But the key limitation is that it does not support
 <i>read-before-write</i>: threads which hold a read lock cannot upgrade it to a write lock.
 <p/>
 Imagine a data structure, let's say a cache, where most requests are to read data, but also there is a maintenance
 thread responsible for periodically traversing the data structure to find and update stale entries. The maintenance
 thread thus would mostly read entries while traversing the data structure, and periodically it might encounter
 entries which need to be updated.
 <p/>
 If a classic ReentrantReadWriteLock is used to control access, the <i>write-before-read</i> support afforded by that lock
 would be <i>insufficient</i>, because if at any point the thread updated an entry and then downgraded its write lock to a
 read lock, it would not be able to upgrade it again to a write lock if it found other stale entries. So the
 maintenance thread would need to hold the write lock for its entire traversal of the data structure, preventing read
 access for that entire duration.

 <h1>ReentrantReadWriteUpdateLock Overview</h1>
 The third type of lock provided, an <i>update lock</i>, is like a <i>super read lock</i>. It behaves like a read lock, in that it
 allows read access to the thread which holds it, and it concurrently <i>"plays nice"</i> with other threads which hold
 regular read locks, allowing those threads concurrent read access.
 <p/>
 The key difference is that the update lock can be upgraded from its read-only status, to a write lock. Thus it
 supports <i>read-before-write</i> usage. Also the write lock can be downgraded again to an update lock, <i>write-before-read</i>
 usage. A restriction however is that, similar to the write lock, only one thread may acquire the update lock at a
 time.
 <p/>
 This is sufficient in situations like the example above, to allow read-mostly, write-occasionally threads to operate
 on the data structure without blocking access to read-only threads most of the time: upgrading to the write lock only
 for the short periods in which they need it, before downgrading to the update lock again. As such it can reduce the
 latency for read-only requests, and increase concurrency in applications which otherwise would use a read-write lock.

 <h2>Lock Acquisition Paths</h2>
 <table border="1">
 <tr><th>Lock type</th><th>Associated Permissions</th><th>Lock acquisition paths</th><th>Lock downgrade paths</th><th>Prevented with exception *</th></tr>
 <tr><td>Read</td><td>Read (shared)</td><td>None → Read<br/>Read → Read (reentrant)</td><td>Read → None</td><td>Read → Update<br/>Read → Write</td></tr>
 <tr><td>Update</td><td>Read (shared)</td><td>None → Update<br/>Update → Update (reentrant)<br/>Write → Update (reentrant)</td><td>Update → None</td><td>Update → Read</td></tr>
 <tr><td>Write</td><td>Read (exclusive)<br/>Write (exclusive)</td><td>None → Write<br/>Update → Write<br/>Write → Write (reentrant)</td><td>Write → Update<br/>Write → None</td><td>Write → Read</td></tr>
 </table>
 * An <tt>IllegalStateException</tt> will be thrown if a thread holding a regular read lock tries to acquire the
 update or write lock, or if a thread holding the update or write lock tries to acquire a regular read lock.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Niall Gallagher</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../com/googlecode/concurentlocks/ReentrantReadWriteUpdateLock.html#ReentrantReadWriteUpdateLock()">ReentrantReadWriteUpdateLock</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/googlecode/concurentlocks/ReentrantReadWriteUpdateLock.html#readLock()">readLock</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/googlecode/concurentlocks/ReentrantReadWriteUpdateLock.html#updateLock()">updateLock</a></strong>()</code>
<div class="block">Returns a lock which allows reading and which may also be upgraded to a lock allowing writing.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/googlecode/concurentlocks/ReentrantReadWriteUpdateLock.html#writeLock()">writeLock</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ReentrantReadWriteUpdateLock()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ReentrantReadWriteUpdateLock</h4>
<pre>public&nbsp;ReentrantReadWriteUpdateLock()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="updateLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateLock</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a>&nbsp;updateLock()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/googlecode/concurentlocks/ReadWriteUpdateLock.html#updateLock()">ReadWriteUpdateLock</a></code></strong></div>
<div class="block">Returns a lock which allows reading and which may also be upgraded to a lock allowing writing.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/googlecode/concurentlocks/ReadWriteUpdateLock.html#updateLock()">updateLock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/googlecode/concurentlocks/ReadWriteUpdateLock.html" title="interface in com.googlecode.concurentlocks">ReadWriteUpdateLock</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a lock which allows reading and which may also be upgraded to a lock allowing writing.</dd></dl>
</li>
</ul>
<a name="readLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readLock</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a>&nbsp;readLock()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReadWriteLock.html?is-external=true#readLock()" title="class or interface in java.util.concurrent.locks">readLock</a></code>&nbsp;in interface&nbsp;<code><a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReadWriteLock.html?is-external=true" title="class or interface in java.util.concurrent.locks">ReadWriteLock</a></code></dd>
</dl>
</li>
</ul>
<a name="writeLock()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>writeLock</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a>&nbsp;writeLock()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReadWriteLock.html?is-external=true#writeLock()" title="class or interface in java.util.concurrent.locks">writeLock</a></code>&nbsp;in interface&nbsp;<code><a href="http://download.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReadWriteLock.html?is-external=true" title="class or interface in java.util.concurrent.locks">ReadWriteLock</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/googlecode/concurentlocks/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ReentrantReadWriteUpdateLock.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/googlecode/concurentlocks/ReadWriteUpdateLock.html" title="interface in com.googlecode.concurentlocks"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/googlecode/concurentlocks/ReentrantReadWriteUpdateLock.html" target="_top">Frames</a></li>
<li><a href="ReentrantReadWriteUpdateLock.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2013. All Rights Reserved.</small></p>
</body>
</html>
